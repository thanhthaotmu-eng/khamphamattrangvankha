<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Tr·∫ª xoay M·∫∑t TrƒÉng quanh Tr√°i ƒê·∫•t</title>
<style>
  body {
    margin: 0;
    background: white;
    touch-action: none;
  }
  canvas {
    display: block;
    margin: auto;
  }
</style>
</head>
<body>

<canvas id="space" width="800" height="500"></canvas>

<script>
const canvas = document.getElementById("space");
const ctx = canvas.getContext("2d");

// V·ªã tr√≠
const earthX = 420;
const earthY = 250;
const orbitRadius = 150;

let angle = -Math.PI / 4;
let dragging = false;

/* üåû V·∫º M·∫∂T TR·ªúI D·ªÑ TH∆Ø∆†NG */
function drawSun() {
  // tia n·∫Øng
  for (let i = 0; i < 12; i++) {
    const a = i * Math.PI / 6;
    ctx.strokeStyle = "#FDB813";
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(120 + Math.cos(a) * 45, earthY + Math.sin(a) * 45);
    ctx.lineTo(120 + Math.cos(a) * 65, earthY + Math.sin(a) * 65);
    ctx.stroke();
  }

  // th√¢n m·∫∑t tr·ªùi
  ctx.beginPath();
  ctx.arc(120, earthY, 40, 0, Math.PI * 2);
  ctx.fillStyle = "#FFD93D";
  ctx.fill();

  // m·∫Øt
  ctx.fillStyle = "#333";
  ctx.beginPath();
  ctx.arc(110, earthY - 5, 4, 0, Math.PI * 2);
  ctx.arc(130, earthY - 5, 4, 0, Math.PI * 2);
  ctx.fill();

  // mi·ªáng
  ctx.beginPath();
  ctx.arc(120, earthY + 5, 10, 0, Math.PI);
  ctx.strokeStyle = "#333";
  ctx.lineWidth = 2;
  ctx.stroke();
}

/* üåç V·∫º TR√ÅI ƒê·∫§T */
function drawEarth() {
  // ƒë·∫°i d∆∞∆°ng
  const g = ctx.createRadialGradient(earthX - 20, earthY - 20, 20, earthX, earthY, 70);
  g.addColorStop(0, "#6ec6ff");
  g.addColorStop(1, "#1a4fb3");

  ctx.beginPath();
  ctx.arc(earthX, earthY, 65, 0, Math.PI * 2);
  ctx.fillStyle = g;
  ctx.fill();

  // l·ª•c ƒë·ªãa (ƒë∆°n gi·∫£n)
  ctx.fillStyle = "#6bbf59";
  ctx.beginPath();
  ctx.moveTo(earthX - 20, earthY - 10);
  ctx.bezierCurveTo(earthX - 50, earthY - 40, earthX - 30, earthY + 30, earthX, earthY + 20);
  ctx.bezierCurveTo(earthX + 20, earthY + 10, earthX + 10, earthY - 10, earthX - 20, earthY - 10);
  ctx.fill();

  ctx.beginPath();
  ctx.moveTo(earthX + 15, earthY - 35);
  ctx.bezierCurveTo(earthX + 45, earthY - 40, earthX + 40, earthY - 10, earthX + 10, earthY - 5);
  ctx.fill();
}

/* üåô V·∫º M·∫∂T TRƒÇNG */
function drawMoon(x, y) {
  const g = ctx.createRadialGradient(x - 10, y - 10, 5, x, y, 30);
  g.addColorStop(0, "#f5f5f5");
  g.addColorStop(1, "#9e9e9e");

  ctx.beginPath();
  ctx.arc(x, y, 28, 0, Math.PI * 2);
  ctx.fillStyle = g;
  ctx.fill();

  // h·ªë trƒÉng
  ctx.fillStyle = "rgba(0,0,0,0.15)";
  ctx.beginPath();
  ctx.arc(x - 8, y - 4, 4, 0, Math.PI * 2);
  ctx.arc(x + 6, y + 6, 6, 0, Math.PI * 2);
  ctx.fill();
}

/* üü° V√íNG QU·ª∏ ƒê·∫†O */
function drawOrbit() {
  ctx.beginPath();
  ctx.arc(earthX, earthY, orbitRadius, 0, Math.PI * 2);
  ctx.strokeStyle = "#d4af37";
  ctx.lineWidth = 8;
  ctx.stroke();
}

/* ‚úã K√âO XOAY */
canvas.addEventListener("pointerdown", () => dragging = true);
canvas.addEventListener("pointerup", () => dragging = false);
canvas.addEventListener("pointerleave", () => dragging = false);

canvas.addEventListener("pointermove", e => {
  if (!dragging) return;

  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;

  angle = Math.atan2(y - earthY, x - earthX);
});

/* üîÑ V·∫º LI√äN T·ª§C */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawSun();
  drawOrbit();
  drawEarth();

  const moonX = earthX + orbitRadius * Math.cos(angle);
  const moonY = earthY + orbitRadius * Math.sin(angle);
  drawMoon(moonX, moonY);

  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
